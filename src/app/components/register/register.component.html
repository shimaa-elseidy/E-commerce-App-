<section class="bg-main-light rounded-4 my-2 p-2 shadow">
    <h1 class="h2 text-main fw-bold">Register Now:</h1>
    <form  [formGroup]="registerForm"  class="mx-2 my-2 p-2" (ngSubmit)="confirmForm()">
        <div>
            <label class="ms-2 my-1"  for="name">Name:</label>
            <input  
            [ngClass]="{
                'is-valid': !registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty),
                'is-invalid': registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)
            }"
            
            id="name" type="text" class="form-control rounded-5" formControlName="name">
            <div>
                @if (registerForm.get('name')?.errors &&  (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)) 
                {
                    <div class="alert alert-danger mx-auto w-25 text-center mt-1 p-0">
                        @if (registerForm.get('name')?.getError('required'))  {<small class="m-0"> Name Is Required </small>}
                        @if (registerForm.get('name')?.getError('minlength')) {<small class="m-0"> Name must be more than 3 characters</small>}
                        @if (registerForm.get('name')?.getError('maxlength')) {<small class="m-0"> Name must be less than 20 characters</small>}
                    </div>
                }
            </div>
        </div>
        <div>
            <label class="ms-2 my-1" for="email">Email:</label>
            <input 
            [ngClass]="{
                'is-valid': !registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty),
                'is-invalid': registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)
            }"
            id="email" type="email" class="form-control rounded-5" formControlName="email">
            <div>
                @if (registerForm.get('email')?.errors &&  (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)) 
                {
                    <div class="alert alert-danger mx-auto w-25 text-center mt-1 p-0">
                        @if (registerForm.get('email')?.getError('required'))  {<small class="m-0"> Email Is Required </small>}
                        @if (registerForm.get('email')?.getError('email'))     {<small class="m-0"> Enter Valid Email</small>}
                    </div>
                }
            </div>
        </div>
        <div>
            <label class="ms-2 my-1" for="password">Password:</label>
            <input 
            [ngClass]="{
                'is-valid': !registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty),
                'is-invalid': registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)
            }"
            id="password" type="password" class="form-control rounded-5" formControlName="password">
            <div>
                @if (registerForm.get('password')?.errors &&  (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)) 
                {
                    <div class="alert alert-danger mx-auto w-25 text-center mt-1 p-0">
                        @if (registerForm.get('password')?.getError('required'))  {<small class="m-0"> password Is Required </small>}
                        @if (registerForm.get('password')?.getError('pattern'))     {<small class="m-0"> Enter Valid Password</small>}
                    </div>
                }
            </div>
        </div>
        <div>
            <label class="ms-2 my-1" for="rePassword">rePassword:</label>
            <input 
            [ngClass]="{
                'is-valid':  !registerForm.getError('mismatch')&& (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty),
                'is-invalid':  registerForm.getError('mismatch')&& (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)}"
            id="rePassword" type="password" class="form-control rounded-5" formControlName="rePassword">
            <div>
                @if (registerForm.getError('mismatch') && registerForm.get('rePassword') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)) 
                {
                    <div class="alert alert-danger mx-auto w-25 text-center mt-1 p-0">
                        <small class="m-0">Password confirmation is incorrect</small>
                    </div>
                }
            </div>
        </div>
        <div>
            <label class="ms-2 my-1" for="phone">Phone:</label>
            <input 
            [ngClass]="{
                'is-valid': !registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty),
                'is-invalid': registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)
            }"
            id="phone" type="tel" class="form-control rounded-5" formControlName="phone">
            <div>
                @if (registerForm.get('phone')?.errors &&  (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)) 
                {
                    <div class="alert alert-danger mx-auto w-25 text-center mt-1 p-0 ">
                        @if (registerForm.get('phone')?.getError('required'))  {<small class="m-0"> phone Is Required </small>}
                        @if (registerForm.get('phone')?.getError('pattern'))     {<small class="m-0"> Enter Valid phone</small>}
                    </div>
                }
            </div>
        </div>
        <button [disabled]="registerForm.invalid || Loading" type="submit" class="btn-main d-block ms-auto mt-2 rounded-5">Register
            @if (Loading==true) {<span class="fas fa-spinner fa-spin" role="status" aria-hidden="true"></span> }
        </button>
        <!-- @if (errMsg) {<small class="alert alert-danger mx-auto w-50 text-center mt1 p-0">{{errMsg}}</small>} -->
        @if (resMsg) {<small class="text-main fw-bolder mx-auto w-50 text-center mt1 p-0">success...</small>}
    </form>
</section>
