import{a as $}from"./chunk-7OI7VEL6.js";import{l as q}from"./chunk-CZWYF673.js";import{a as V}from"./chunk-VZUT2HSF.js";import{a as j,c as R,e as U,k as W}from"./chunk-KPIKQBSM.js";import{a as G}from"./chunk-DAJIJWAN.js";import{c as N,d as z}from"./chunk-CC7GWEDI.js";import"./chunk-4VT6TJ2K.js";import{h as H}from"./chunk-5WYGOTPD.js";import{n as D}from"./chunk-LPJVVXA6.js";import{Bb as E,Cb as F,Kb as c,Lb as s,Nb as M,Ob as k,Pa as y,Pb as L,Rb as A,Sb as I,Ta as i,Tb as B,Xb as m,Yb as O,Zb as S,ca as l,fa as x,ib as b,kb as f,ob as P,pa as C,pb as T,qa as h,qb as v,rb as _,sb as r,tb as n,ub as p,xb as w}from"./chunk-QDCAKHSC.js";var J=(t,d)=>d.id,K=t=>["/details",t],Q=()=>[1,2,3,4,5];function X(t,d){t&1&&(r(0,"span"),p(1,"i",15),n())}function Y(t,d){t&1&&p(0,"i",12)}function Z(t,d){if(t&1){let e=w();r(0,"div",4)(1,"div",5)(2,"div")(3,"div",6),p(4,"img",7),r(5,"h3",8),c(6),n(),r(7,"h4",9),c(8),n(),r(9,"div",10)(10,"span",11),c(11),m(12,"currency"),n(),r(13,"div"),v(14,X,2,0,"span",null,T),b(16,Y,1,0,"i",12),r(17,"span",13),c(18),n()()()(),r(19,"div")(20,"button",14),E("click",function(){let a=C(e).$implicit,g=F();return h(g.addToCart(a.id))}),c(21,"+Add to cart"),n()()()()()}if(t&2){let e=d.$implicit;i(3),f("routerLink",B(11,K,e.id)),i(),f("src",e.imageCover,y)("alt",e.title),i(2),s(e.category.name),i(2),s(e.title.split(" ",2).join(" ")),i(3),s(S(12,8,e.price,"GBP")),i(3),_(I(13,Q).slice(0,e.ratingsAverage)),i(2),P(16,e.ratingsAverage%1!==0?16:-1),i(2),s(e.ratingsAverage)}}var ue=(()=>{class t{constructor(){this.productList=[],this.text="",this._HomeServiceService=l(V),this._CartService=l(G),this._ToastrService=l(q)}ngOnInit(){this.allproductSub=this._HomeServiceService.getAllProducts().subscribe({next:e=>{this.productList=e.data}})}addToCart(e){this.addToCartSub=this._CartService.addPropductToCart(e).subscribe({next:o=>{console.log(o),this._ToastrService.success("Product added successfully to your cart","Success",{positionClass:"toast-top-center",timeOut:3e3})},error:()=>{this._ToastrService.error("Failed to add product to cart.","Error")}})}ngOnDestroy(){this.allproductSub?.unsubscribe(),this.addToCartSub?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=x({type:t,selectors:[["app-products"]],standalone:!0,features:[A],decls:10,vars:7,consts:[[1,"my-2","py-5"],[1,"text-main","fw-bolder","fs-4","my-3","text-center"],["type","search","placeholder","Search by name...",1,"w-50","form-control","mx-auto","my-2","rounded-5",3,"ngModelChange","ngModel"],[1,"row","g-3","my-1"],[1,"col-md-2"],[1,"product","card","p-2"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main","mt-1","fw-bold","text-center"],[1,"h6","mt-1","text-center"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-main","fw-bold"],[1,"fas","fa-star-half-stroke","rating-color"],[1,"text-muted"],[1,"btn","btn-main","mt-1","w-100","rounded-4",3,"click"],[1,"fas","fa-star","rating-color"]],template:function(o,a){o&1&&(r(0,"section",0)(1,"h2",1),c(2),m(3,"translate"),n(),r(4,"input",2),L("ngModelChange",function(u){return k(a.text,u)||(a.text=u),u}),n(),r(5,"div")(6,"div",3),v(7,Z,22,14,"div",4,J),m(9,"searchPipe"),n()()()),o&2&&(i(2),s(O(3,2,"HOME.POPULAR_PRODUCTS")),i(2),M("ngModel",a.text),i(3),_(S(9,4,a.productList,a.text)))},dependencies:[D,H,$,W,j,R,U,z,N]})}}return t})();export{ue as ProductsComponent};
