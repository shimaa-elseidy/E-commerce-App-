import './polyfills.server.mjs';
import{a as T}from"./chunk-CX6CO7AG.mjs";import{a as x,b as f,c as N,d as M,f as R,g as k,h as q,j as A,l as V}from"./chunk-LONSOCWI.mjs";import"./chunk-E3EVZCWB.mjs";import{k as L,l as b}from"./chunk-GLGEAX7W.mjs";import{j as y}from"./chunk-OBCDUCAI.mjs";import{Hb as m,Ob as E,Qa as l,Rb as C,Y as v,aa as S,fb as g,hb as _,lb as u,pb as i,qb as n,rb as F,yb as w,zb as h}from"./chunk-XICHFWCK.mjs";import"./chunk-VVCT4QZE.mjs";var D=(t,d)=>({"is-valid":t,"is-invalid":d});function G(t,d){t&1&&(i(0,"small",13),m(1," Email Is Required "),n())}function I(t,d){t&1&&(i(0,"small",13),m(1," Enter Valid Email"),n())}function B(t,d){if(t&1&&(i(0,"div",5),g(1,G,2,0,"small",13)(2,I,2,0,"small",13),n()),t&2){let r,s,e=h();l(),u(1,(r=e.loginForm.get("email"))!=null&&r.getError("required")?1:-1),l(),u(2,(s=e.loginForm.get("email"))!=null&&s.getError("email")?2:-1)}}function P(t,d){t&1&&(i(0,"small",13),m(1," password Is Required "),n())}function j(t,d){t&1&&(i(0,"small",13),m(1," Enter Valid Password"),n())}function U(t,d){if(t&1&&(i(0,"div",5),g(1,P,2,0,"small",13)(2,j,2,0,"small",13),n()),t&2){let r,s,e=h();l(),u(1,(r=e.loginForm.get("password"))!=null&&r.getError("required")?1:-1),l(),u(2,(s=e.loginForm.get("password"))!=null&&s.getError("pattern")?2:-1)}}function $(t,d){t&1&&F(0,"span",11)}function z(t,d){t&1&&(i(0,"small",12),m(1,"success..."),n())}var Z=(()=>{class t{constructor(){this._AuthServiceService=v(T),this._FormBuilder=v(A),this._Router=v(L),this.disabled=!0,this.Loading=!1,this.errMsg="",this.resMsg=!1,this.loginForm=this._FormBuilder.group({email:[null,[f.required,f.email]],password:[null,[f.required,f.pattern(/^\w{6,}$/)]]})}confirmForm(){this.loginForm.valid&&(this.Loading=!0,this._AuthServiceService.signIn(this.loginForm.value).subscribe({next:r=>{r.message=="success"&&(this.Loading=!1,this.resMsg=!0,localStorage.setItem("userToken",r.token),this._AuthServiceService.saveUserToken,setTimeout(()=>{this._Router.navigate(["./home"])},2e3))},error:r=>{this.errMsg=r.error.message,this.Loading=!1}}))}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275cmp=S({type:t,selectors:[["app-login"]],standalone:!0,features:[E],decls:23,vars:14,consts:[[1,"bg-main-light","rounded-4","my-2","p-2","shadow"],[1,"h2","text-main","fw-bold"],[1,"ms-2","me-2",3,"ngSubmit","formGroup"],["for","email",1,"ms-2","my-1"],["id","email","type","email","formControlName","email",1,"form-control","rounded-5",3,"ngClass"],[1,"alert","alert-danger","mx-auto","w-25","text-center","mt-1","p-0"],["for","password",1,"ms-2","my-1"],["id","password","type","password","formControlName","password",1,"form-control","rounded-5",3,"ngClass"],[1,"d-flex","align-content-center","justify-content-end","my-2","gap-1"],["routerLink","/forgot",1,"link-danger","my-2","me-1"],["type","submit",1,"btn-main","rounded-5",3,"disabled"],["role","status","aria-hidden","true",1,"fas","fa-spinner","fa-spin"],[1,"text-main","fw-bolder","mx-auto","w-50","text-center","mt1","p-0"],[1,"m-0"]],template:function(s,e){if(s&1&&(i(0,"section",0)(1,"h1",1),m(2,"Login Now:"),n(),i(3,"form",2),w("ngSubmit",function(){return e.confirmForm()}),i(4,"div")(5,"label",3),m(6,"Email:"),n(),F(7,"input",4),i(8,"div"),g(9,B,3,2,"div",5),n()(),i(10,"div")(11,"label",6),m(12,"Password:"),n(),F(13,"input",7),i(14,"div"),g(15,U,3,2,"div",5),n()(),i(16,"div",8)(17,"a",9),m(18,"Forgot Password"),n(),i(19,"button",10),m(20,"login "),g(21,$,1,0,"span",11),n()(),g(22,z,2,0,"small",12),n()()),s&2){let o,p,a,c;l(3),_("formGroup",e.loginForm),l(4),_("ngClass",C(8,D,!((o=e.loginForm.get("email"))!=null&&o.errors)&&(((o=e.loginForm.get("email"))==null?null:o.touched)||((o=e.loginForm.get("email"))==null?null:o.dirty)),((o=e.loginForm.get("email"))==null?null:o.errors)&&(((o=e.loginForm.get("email"))==null?null:o.touched)||((o=e.loginForm.get("email"))==null?null:o.dirty)))),l(2),u(9,(p=e.loginForm.get("email"))!=null&&p.errors&&((p=e.loginForm.get("email"))!=null&&p.touched||(p=e.loginForm.get("email"))!=null&&p.dirty)?9:-1),l(4),_("ngClass",C(11,D,!((a=e.loginForm.get("password"))!=null&&a.errors)&&(((a=e.loginForm.get("password"))==null?null:a.touched)||((a=e.loginForm.get("password"))==null?null:a.dirty)),((a=e.loginForm.get("password"))==null?null:a.errors)&&(((a=e.loginForm.get("password"))==null?null:a.touched)||((a=e.loginForm.get("password"))==null?null:a.dirty)))),l(2),u(15,(c=e.loginForm.get("password"))!=null&&c.errors&&((c=e.loginForm.get("password"))!=null&&c.touched||(c=e.loginForm.get("password"))!=null&&c.dirty)?15:-1),l(4),_("disabled",e.loginForm.invalid||e.Loading),l(2),u(21,e.Loading==!0?21:-1),l(),u(22,e.resMsg?22:-1)}},dependencies:[V,R,x,N,M,k,q,y,b]})}}return t})();export{Z as LoginComponent};
